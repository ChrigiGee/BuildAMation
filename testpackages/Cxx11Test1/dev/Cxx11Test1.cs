// Automatically generated by BuildAMation v0.60
[assembly:Bam.Core.GlobalOptionCollectionOverride(typeof(Cxx11Test1.GlobalSettings))]

namespace Cxx11Test1
{
    class GlobalSettings : Bam.Core.IGlobalOptionCollectionOverride
    {
        #region IGlobalOptionCollectionOverride implementation
        void
        Bam.Core.IGlobalOptionCollectionOverride.OverrideOptions(
            Bam.Core.BaseOptionCollection optionCollection,
            Bam.Core.Target target)
        {
            var cOptions = optionCollection as C.ICCompilerOptions;
            if (null != cOptions)
            {
                var cxxOptions = optionCollection as C.ICxxCompilerOptions;
                if (null != cxxOptions)
                {
                    // enable exceptions (some flavours of STL need it)
                    cxxOptions.ExceptionHandler = C.Cxx.EExceptionHandler.Asynchronous;

                    // default C++ mode to C++11
                    // note this is on the C compiler options, but only enabled when C++
                    // options are in use
                    cOptions.LanguageStandard = C.ELanguageStandard.Cxx11;
                }
            }
        }
        #endregion
    }

    class TestProg : C.Application
    {
        class Source : C.Cxx.ObjectFileCollection
        {
            public Source()
            {
                var sourceDir = this.PackageLocation.SubDirectory("source");
                this.Include(sourceDir, "*.cpp");
            }
        }

        [Bam.Core.SourceFiles]
        Source source = new Source();

        [Bam.Core.DependentModules(Platform = Bam.Core.EPlatform.Windows)]
        Bam.Core.TypeArray windowsDeps = new Bam.Core.TypeArray() {
            typeof(WindowsSDK.WindowsSDK)
        };
    }
}
